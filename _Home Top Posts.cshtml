@inherits Custom.Hybrid.Razor12
@using ToSic.Razor.Blade;
@{
  var helpers = CreateInstance("shared/Helpers.cs");
}

@* Show details page warning *@
@if(Edit.Enabled) {
  if(!Text.Has(Settings.DetailsPage)) {
    <div class="alert alert-danger" role="alert">@Html.Raw(@Resources.LabelAdminDetailPageWarning)</div>
  }
}

<section class="app-blog" @Edit.TagToolbar(Content)>
  <div class="category-header"><h1>@Content.Title</h1></div>

  @* List the posts in 3 columns *@
  <div class="row card-deck">
    @foreach (var post in AsList(Data["Posts"])) {
      var imageUrl = Text.Has(post.Image) ? post.Image : Resources.PlaceholderMissingImage;

      <article class="list-item col-12 col-md-6 col-lg-4" @Edit.TagToolbar(post, toolbar: new [] {
        "-layout",
        "%new&show=true?contentType=BlogPost&entityId=0",
        "%delete&show=true"
      })>
        <div class="app-blog-readmorelink card m-0">
          @* <a class="link-overlay" href="@helpers.LinkToDetailsPage(post)"></a> *@

          @* Image of the post *@
          @Html.Partial("shared/_Post Image.cshtml", new { Post = post, Settings = Settings.Images.BlogCards })

          <div class="card-body d-flex flex-column">
            <h5 class="card-title">@post.Title</h5>
            <p class="card-text text">@Html.Raw(Tags.Strip(post.Teaser))</p>
          </div>
          <div class="card-footer">
            <span class="readmore btn btn-outline-primary float-right">@Resources.ReadMore</span>
          </div>
        </div>
      </article>
    }
  </div>

  @* Show pagination if configured *@
  @if (Content.ShowPagination != null && Content.ShowPagination) {
    @Html.Partial("shared/_List Paging.cshtml")
  }
</section>

@Html.Partial("shared/_Assets.cshtml")
