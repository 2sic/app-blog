(()=>{var e={305:function(e){e.exports=function(){"use strict";var e={required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format"};function t(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}function r(e){var t=arguments;return this.replace(/\${([^{}]*)}/g,(function(e,r){return t[r]}))}function n(e){return e.pristine.self.form.querySelectorAll('input[name="'+e.getAttribute("name")+'"]:checked').length}function o(e,t){for(var r in t)r in e||(e[r]=t[r]);return e}function i(e){return!!(e&&e.constructor&&e.call&&e.apply)}var a={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},s="pristine-error",l="input:not([type^=hidden]):not([type^=submit]), select, textarea",c=["required","min","max","minlength","maxlength","pattern"],u=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,p={},f=function(t,r){r.name=t,r.msg||(r.msg=e[t]),void 0===r.priority&&(r.priority=1),p[t]=r};function d(e,n,u){var f=this;function d(e,t,r){e.setAttribute("novalidate","true"),f.form=e,f.config=o(t||{},a),f.live=!(!1===r),f.fields=Array.from(e.querySelectorAll(l)).map(function(e){var t=[],r={},n={};return[].forEach.call(e.attributes,(function(e){if(/^data-pristine-/.test(e.name)){var o=e.name.substr(14);if(o.endsWith("-message"))return void(n[o.slice(0,o.length-8)]=e.value);"type"===o&&(o=e.value),m(t,r,o,e.value)}else~c.indexOf(e.name)?m(t,r,e.name,e.value):"type"===e.name&&m(t,r,e.value)})),t.sort((function(e,t){return t.priority-e.priority})),f.live&&e.addEventListener(~["radio","checkbox"].indexOf(e.getAttribute("type"))?"change":"input",function(e){f.validate(e.target)}.bind(f)),e.pristine={input:e,validators:t,params:r,messages:n,self:f}}.bind(f))}function m(e,t,r,n){var o=p[r];if(o&&(e.push(o),n)){var i=n.split(",");i.unshift(null),t[r]=i}}function g(e){for(var t=[],n=!0,o=0;e.validators[o];o++){var a=e.validators[o],s=e.params[a.name]?e.params[a.name]:[];if(s[0]=e.input.value,!a.fn.apply(e.input,s)){if(n=!1,i(a.msg))t.push(a.msg(e.input.value,s));else{var l=e.messages[a.name]||a.msg;t.push(r.apply(l,s))}if(!0===a.halt)break}}return e.errors=t,n}function v(e){if(e.errorElements)return e.errorElements;var r=t(e.input,f.config.classTo),n=null,o=null;return(n=f.config.classTo===f.config.errorTextParent?r:r.querySelector("."+f.config.errorTextParent))&&((o=n.querySelector("."+s))||((o=document.createElement(f.config.errorTextTag)).className=s+" "+f.config.errorTextClass,n.appendChild(o),o.pristineDisplay=o.style.display)),e.errorElements=[r,o]}function h(e){var t=v(e),r=t[0],n=t[1];r&&(r.classList.remove(f.config.successClass),r.classList.add(f.config.errorClass)),n&&(n.innerHTML=e.errors.join("<br/>"),n.style.display=n.pristineDisplay||"")}function y(e){var t=v(e),r=t[0],n=t[1];return r&&(r.classList.remove(f.config.errorClass),r.classList.remove(f.config.successClass)),n&&(n.innerHTML="",n.style.display="none"),t}function b(e){var t=y(e)[0];t&&t.classList.add(f.config.successClass)}return d(e,n,u),f.validate=function(e,t){t=e&&!0===t||!0===e;var r=f.fields;!0!==e&&!1!==e&&(e instanceof HTMLElement?r=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(r=Array.from(e).map((function(e){return e.pristine}))));for(var n=!0,o=0;r[o];o++){var i=r[o];g(i)?!t&&b(i):(n=!1,!t&&h(i))}return n},f.getErrors=function(e){if(!e){for(var t=[],r=0;r<f.fields.length;r++){var n=f.fields[r];n.errors.length&&t.push({input:n.input,errors:n.errors})}return t}return e.tagName&&"select"===e.tagName.toLowerCase()?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors},f.addValidator=function(e,t,r,n,o){e instanceof HTMLElement?(e.pristine.validators.push({fn:t,msg:r,priority:n,halt:o}),e.pristine.validators.sort((function(e,t){return t.priority-e.priority}))):console.warn("The parameter elem must be a dom element")},f.addError=function(e,t){(e=e.length?e[0]:e).pristine.errors.push(t),h(e.pristine)},f.reset=function(){for(var e=0;f.fields[e];e++)f.fields[e].errorElements=null;Array.from(f.form.querySelectorAll("."+s)).map((function(e){e.parentNode.removeChild(e)})),Array.from(f.form.querySelectorAll("."+f.config.classTo)).map((function(e){e.classList.remove(f.config.successClass),e.classList.remove(f.config.errorClass)}))},f.destroy=function(){f.reset(),f.fields.forEach((function(e){delete e.input.pristine})),f.fields=[]},f.setGlobalConfig=function(e){a=e},f}return f("text",{fn:function(e){return!0},priority:0}),f("required",{fn:function(e){return"radio"===this.type||"checkbox"===this.type?n(this):void 0!==e&&""!==e},priority:99,halt:!0}),f("email",{fn:function(e){return!e||u.test(e)}}),f("number",{fn:function(e){return!e||!isNaN(parseFloat(e))},priority:2}),f("integer",{fn:function(e){return!e||/^\d+$/.test(e)}}),f("minlength",{fn:function(e,t){return!e||e.length>=parseInt(t)}}),f("maxlength",{fn:function(e,t){return!e||e.length<=parseInt(t)}}),f("min",{fn:function(e,t){return!e||("checkbox"===this.type?n(this)>=parseInt(t):parseFloat(e)>=parseFloat(t))}}),f("max",{fn:function(e,t){return!e||("checkbox"===this.type?n(this)<=parseInt(t):parseFloat(e)<=parseFloat(t))}}),f("pattern",{fn:function(e,t){var r=t.match(new RegExp("^/(.*?)/([gimy]*)$"));return!e||new RegExp(r[1],r[2]).test(e)}}),d.addValidator=function(e,t,r,n,o){f(e,{fn:t,msg:r,priority:n,halt:o})},d}()},622:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};t.__esModule=!0;var o=r(305);function i(e,t){var r=e.querySelector("[app-blog5-discussion-pseudonym]"),n=e.querySelector("[app-blog5-discussion-content]"),o=window.localStorage.getItem("draft-pseudonym-"+t),i=window.localStorage.getItem("draft-content-"+t);r&&(r.value=o),n&&(n.value=i)}function a(e){window.localStorage.removeItem("draft-pseudonym-"+e),window.localStorage.removeItem("draft-content-"+e)}function s(e,t){var r=e.querySelector("[app-blog5-discussion-pseudonym]"),n=e.querySelector("[app-blog5-discussion-content]");r&&r.addEventListener("keyup",(function(){return window.localStorage.setItem("draft-pseudonym-"+t,r.value)})),n&&n.addEventListener("keyup",(function(){return window.localStorage.setItem("draft-content-"+t,n.value)}))}function l(e){var t=e.querySelector("[app-blog5-discussion-pseudonym]"),r={content:e.querySelector("[app-blog5-discussion-content]").value};return null!=t&&(r.pseudonym=t.value),r}t.default=function(e){var t=e.moduleId,r=e.targetId,c=document.querySelector("[app-blog5-discussion-"+t+"]"),u=c.querySelector("[app-blog5-discussion-form]"),p=u.querySelector("[app-blog5-submit-comment-button]"),f=$2sxc(t).data("Comment");i(c,"main"),s(c,"main"),p.addEventListener("click",(function(){if(new o(u).validate()){var e=n({target:r},l(u));$2sxc(t).webApi.fetchJson("comment/create",e).then((function(e){if(e.Created)return a("main"),void location.reload();alert("Something went wrong, please contact the Admin.")}))}})),c.querySelectorAll("[app-blog5-show-all]").forEach((function(e){e&&e.addEventListener("click",(function(){var t=e.getAttribute("app-blog5-show-id");c.querySelectorAll('[app-blog5-parent-id="'+t+'"]').forEach((function(e){return e.classList.remove("d-none")})),e.classList.toggle("d-none")}))})),c.querySelectorAll("[app-blog5-reply-button]").forEach((function(e){e.addEventListener("click",(function(){if(!e.parentElement.classList.contains("reply-form-active")){c.querySelectorAll(".reply-form-active").forEach((function(e){return e.classList.toggle("reply-form-active")})),c.querySelectorAll("[app-blog5-reply-form-wrapper]").forEach((function(e){return e.remove()}));var u=c.querySelector("[app-blog5-reply-template]").content.cloneNode(!0),p=u.querySelector("[app-blog5-reply-form]"),f=u.querySelector("[app-blog5-submit-reply-button]"),d=u.querySelector("[app-blog5-cancel-reply-button]"),m=e.closest("[app-blog5-reply-wrapper]");m.appendChild(u);var g=p.closest("[app-blog5-comment-id]").getAttribute("app-blog5-comment-id");i(p,g),s(p,g),e.parentElement.classList.toggle("reply-form-active"),f.addEventListener("click",(function(){if(new o(p).validate()){var e=n({parentComment:+g,target:r},l(p));$2sxc(t).webApi.fetchJson("comment/create",e).then((function(e){if(e.Created)return a(g),void location.reload();alert("Something went wrong, please contact the Admin.")}))}})),d.addEventListener("click",(function(){m.querySelector("[app-blog5-reply-form-wrapper]").remove(),e.parentElement.classList.toggle("reply-form-active")}))}}))})),c.querySelectorAll("[app-blog5-deny-button]").forEach((function(e){var t=e.closest("[app-blog5-comment-id]").getAttribute("app-blog5-comment-id");e.addEventListener("click",(function(){confirm("This action can't be reverted. Are you sure you want to delete this comment?")&&f.delete(t+"?force=true").then((function(e){e.Created?location.reload():alert("Something went wrong, please contact the Admin.")}))}))})),c.querySelectorAll("[app-blog5-publish-button]").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest("[app-blog5-comment-id]").getAttribute("app-blog5-comment-id");f.update(t,{PublishState:!0}).then((function(e){e.Modified?location.reload():alert("Something went wrong, please contact the Admin.")}))}))}))}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(()=>{"use strict";var e,t,n;var o=r(622),i=window;null!==(e=i.appBlog5)&&void 0!==e||(i.appBlog5={}),null!==(t=(n=i.appBlog5).initDiscussion)&&void 0!==t||(n.initDiscussion=o.default)})()})();
//# sourceMappingURL=scripts.min.js.map